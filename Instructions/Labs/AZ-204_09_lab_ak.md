---
lab:
    title: 랩: Logic Apps로 비즈니스 프로세스 자동화
    module: '모듈 09: App Service Logic Apps 개발
    type: '해답'
---
    
# 랩: Logic Apps로 비즈니스 프로세스 자동화
# 학생 랩 답변 키

## Microsoft Azure 사용자 인터페이스

Microsoft 클라우드 도구의 동적 특성을 감안할 때, 이 교육 콘텐츠를 개발한 후 Azure UI가 변경될 수 있습니다. 이러한 변경으로 인해 랩 지침 및 랩 단계가 일치하지 않을 수 있습니다.

Microsoft는 커뮤니티가 필요한 변경 사항을 제공하면 이 교육 과정을 업데이트합니다. 그러나 클라우드 업데이트가 자주 발생하기 때문에 이 교육 콘텐츠가 업데이트되기 전에 UI가 먼저 변경될 수 있습니다. **이 경우 변경 사항에 적응하고 필요에 따라 랩에서 작업합니다.**

## 지침

### 시작하기 전에

#### 랩 가상 머신에 로그인

다음 자격 증명을 사용하여 Windows 10 VM(가상 머신)에 로그인합니다.
    
-   사용자 이름: **관리자**

-   암호: **Pa55w.rd**

> **참고**: 강사가 가상 랩 환경 연결에 대한 지침을 제공합니다.

#### 설치된 응용 프로그램 리뷰

Windows 10 데스크톱에서 작업 표시줄을 찾습니다. 작업 표시줄에는 이 랩에서 사용할 애플리케이션에 대한 아이콘이 포함되어 있습니다.
    
-   Microsoft Edge

-   File Explorer

-   Windows Terminal

### 연습 1: Azure 리소스 만들기

#### 작업 1: Azure Portal 열기

1.  작업 표시줄에서 **Microsoft Edge** 아이콘을 선택합니다.

1.  열려 있는 브라우저 창에서 Azure Portal(<https://portal.azure.com>)로 이동합니다.

1.  Microsoft 계정의 이메일 주소를 입력한 다음 **다음**을 선택합니다.

1.  Microsoft 계정의 암호를 입력한 다음 **로그인**을 선택합니다.

    > **참고**: Azure Portal에 처음 로그인하는 경우 포털 둘러보기가 제공됩니다. 둘러보기를 건너뛰려면 **시작하기**를 선택합니다.

#### 작업 2: API Management 리소스 만들기

1.  Azure Portal 탐색 창에서 **리소스 만들기**를 선택합니다.

1.  **새** 블레이드에서 **마켓플레이스 검색** 텍스트 상자를 찾습니다.

1.  검색 상자에서 **API**를 입력한 다음 Enter 키를 선택합니다.

1.  **마켓플레이스** 검색 결과 블레이드에서 **API 관리** 결과를 선택합니다.

1.  **API 관리** 블레이드에서 **만들기**를 선택합니다.

1.  **API 관리 서비스** 블레이드에서 다음 작업을 수행합니다.
    
    1.  **이름** 텍스트 상자에 **prodapim*[yourname]***을 입력합니다.
    
    1.  **구독** 텍스트 상자를 기본값으로 설정합니다.
    
    1.  **리소스 그룹** 섹션에서 **새로 만들기**를 선택하고 **AutomatedWorkflow**를 입력한 다음 **확인**을 선택합니다.
    
    1.  **위치** 목록에서 **미국 동부**를 선택합니다.
    
    1.  **조직 이름** 텍스트 상자에 **Contoso**를 입력합니다.
    
    1.  **관리자 이메일** 텍스트 상자를 기본값으로 설정한 상태로 둡니다.
    
    1.  **가격 계층** 목록에서 **사용(99.9 SLA, %)**을 선택하고 **만들기**을 선택합니다.
    
    > **참고**: 랩을 진행하기 전에 Azure가 API Management 리소스 만들기를 완료할 때까지 기다립니다. 리소스가 생성되면 알림을 받게 됩니다.

#### 작업 3: 논리 앱 리소스 만들기

1.  Azure Portal의 탐색 창에서 **+ 리소스 만들기**를 선택합니다.

1.  **새** 블레이드에서 **마켓플레이스 검색** 필드를 찾습니다.

1.  검색 필드에서 **논리**를 입력하고 엔터를 선택합니다.

1.  **모든** 검색 결과 블레이드에서 **논리 앱**을 선택합니다.

1.  **논리 앱** 블레이드에서 **만들기**를 선택합니다.

1.  **논리 앱** 블레이드에서 **기본**, **태그** 및 **검토 + 만들기**와 같은 블레이드의 탭을 검토합니다.

    > **참고**: 각 탭은 새 논리 앱을 만드는 워크플로의 단계를 나타냅니다. 언제든지 **검토 + 만들기**를 선택하여 나머지 탭을 건너뛸 수 있습니다.

1.  **기본** 탭을 선택하고 탭 영역 내에서 다음 작업을 수행합니다.
       
    1.  **구독** 필드를 기본값으로 놔둡니다.
    
    1.  **리소스 그룹** 섹션에서**기존 사용**을 선택한 다음 이전에 랩에서 만든 **AutomatedWorkflow** 그룹을 선택합니다.
        
    1.  **논리 앱 이름** 필드에 **prodflow*[yourname]***을 입력합니다.

    1.  **위치 선택** 섹션에서 **지역**을 선택합니다.

    1.  **위치** 목록에서 **미국 동부**를 선택합니다.
    
    1.  **로그 분석** 섹션에서 **끄기**를 선택합니다.
    
    1.  **검토 + 만들기**를 선택합니다.

1.  **검토+ 만들기** 탭에서 이전 단계에서 지정한 옵션을 검토합니다.

1.  지정된 구성을 사용하여 논리 앱을 만들려면 **만들기**를 선택합니다.

    > **참고**: 랩으로 진행하기 전에 Azure가 Logic Apps 리소스 만들기를 완료할 때까지 기다립니다. 리소스가 생성되면 알림을 받게 됩니다.

#### 작업 4: 스토리지 계정 만들기

1.  Azure Portal 탐색 창에서 **모든 서비스**를 선택합니다.

1.  **모든 서비스** 블레이드에서 **스토리지 계정**을 선택합니다.

1.  **스토리지 계정** 블레이드에서 스토리지 계정 인스턴스 목록을 가져오고, **추가**를 선택합니다.

1.  **스토리지 계정 만들기** 블레이드에서 **기본** **태그** 및 **검토+만들기**와 같은 블레이드의 탭을 검토합니다.

    > **참고**: 각 탭은 새 스토리지 계정을 만드는 워크플로의 단계를 나타냅니다. 언제든지 **검토 + 만들기**를 선택하여 나머지 탭을 건너뛸 수 있습니다.

1.  **기본** 탭을 선택하고 탭 영역 내에서 다음 작업을 수행합니다.
    
    1.  **구독** 텍스트 상자를 기본값으로 설정합니다.
    
    1.  **리소스 그룹** 섹션에서 이전에 랩에서 만든 **AutomatedWorkflow** 그룹을 선택합니다.
    
    1.  **스토리지 계정 이름** 텍스트 상자에 **prodstor*[yourname]***을 입력합니다.
    
    1.  **위치** 목록에서 **(미국) 미국 동부** 지역을 선택합니다.
    
    1.  **성능** 섹션에서 **표준**을 선택합니다.
    
    1.  **계정 종류** 목록에서 **StorageV2(범용 v2)**를 선택합니다.
    
    1.  **복제** 목록에서 **LRS(로컬 중복 스토리지)**를 선택합니다.
    
    1.  **액세스 계층(기본값)** 섹션에서 **핫**이 선택되어 있는지 확인합니다.
    
    1.  **검토 + 만들기**를 선택합니다.

1.  **검토+ 만들기** 탭에서 이전 단계에서 지정한 옵션을 검토합니다.

1.  지정된 구성을 사용하여 스토리지 계정을 만들려면 **만들기**를 선택합니다.

    > **참고**: **배포** 블레이드에서 만들기 작업이 완료될 때까지 기다린 후 이 랩을 진행합니다.

#### 작업 5: Azure Files에 샘플 콘텐츠 업로드

1.  Azure Portal 탐색 창에서 **리소스 그룹** 링크를 선택합니다.

1.  **리소스 그룹** 블레이드에서, 이 랩의 앞에서 만든 **AutomatedWorkflow** 리소스 그룹을 찾아 선택합니다.

1.  **AutomatedWorkflow** 블레이드에서 이전에 랩에서 만든 **prodstor*[yourname]*** 스토리지 계정을 선택합니다.

1.  **스토리지 계정** 블레이드의 **파일 서비스** 섹션에서 **파일 공유** 링크를 선택합니다.

1.  **파일 공유** 섹션에서 **+ 파일 공유**를 선택합니다.

1.  **파일 공유** 팝업 대화 상자에서 다음 작업을 수행합니다.
    
    1.  **이름** 텍스트 상자에 **메타데이터**를 입력합니다.
    
    1.  **할당량** 텍스트 상자에 **1**(GiB)을 입력합니다.
    
    1.  **만들기**를 선택합니다.

1.  **파일 공유** 섹션으로 돌아가서 새로 만든 **메타데이터** 공유를 선택합니다.

1.	**파일 공유** 블레이드에서 **업로드**를 선택합니다.

1.	**파일 업로드** 대화 상자에서 다음 단계를 수행합니다.

    1.  **파일** 섹션에서 **폴더** 아이콘을 선택합니다.

    1.  **파일 탐색기** 창에서 **Allfiles (F):\\Allfiles\\Labs\\09\\Starter**를 찾고, 다음 파일을 선택한 다음 **열기**를 선택합니다.

        -   **item_00.json**
        
        -   **item_01.json**
        
        -   **item_02.json**
        
        -   **item_03.json**
        
        -   **item_04.json** 

    1.  **파일이 이미 있는 경우 덮어쓰기** 확인란이 선택되어 있는지 확인하고, **업로드**를 선택합니다. 
    
    > **참고**: 이 랩을 계속하기 전에 Blob이 업로드될 때까지 기다립니다.

#### 검토

이 연습에서는 이 랩에 사용할 모든 리소스를 만들었습니다.

### 연습 2: Logic Apps를 사용하여 워크플로 구현

#### 작업 1: 워크플로에 대한 트리거 만들기

1.  Azure Portal 탐색 창에서 **리소스 그룹**을 선택합니다.

1.  **리소스 그룹** 블레이드에서 이전에 랩에서 만든 **AutomatedWorkflow** 리소스 그룹을 선택합니다.

1.  **AutomatedWorkflow** 블레이드에서 이전에 랩에서 만든 **prodflow*[yourname]*** 논리 앱을 선택합니다.

1.  **Logic Apps 디자이너** 블레이드에서 **빈 논리 앱** 템플릿을 선택합니다.

1.  **디자이너** 영역에서 다음 작업을 수행하여 **HTTP 요청을 받았을 때(요청)** 트리거를 추가합니다.
    
    1.  **커넥터 및 트리거 검색** 필드에서 **HTTP**를 입력합니다.
    
    1.  변환 목록에서 **요청**을 선택합니다.
    
    1.  **트리거** 결과 목록에서 **HTTP 요청이 수신된 경우**를 선택합니다.

1.  **HTTP 요청이 수신된 경우** 영역에서 다음 작업을 수행하여 **HTTP 요청이 수신된 경우(요청)** 트리거를 구성합니다.
    
    1.  **새 매 변수 추가** 목록에서 **메서드**를 선택합니다.

    1.  **메서드** 목록에서 **GET**을 선택합니다.

#### 작업 2: Azure Storage 파일 공유를 쿼리하는 작업 만들기

1.  **디자이너** 영역에서 **+ 새 단계**를 선택한 다음, 다음 작업을 수행하여 **파일 목록(Azure File Storage)** 작업을 추가합니다.
    
    1.  **검색 커넥터 및 트리거** 필드에서 **files**를 입력합니다.
    
    1.  범주 목록에서 **Azure File Storage**를 선택합니다.
    
    1.  **작업** 결과 목록에서 **파일 목록**을 선택합니다.
    
    1.  **연결 이름** 필드에 **filesConnection**을 입력합니다.
    
    1.  **스토리지 계정** 섹션에서 이전에 랩에서 만든 **prodstor*[yourname]*** 스토리지 계정을 선택한 다음 **만들기**를 선택합니다.
    
    1.  커넥터 리소스가 생성을 완료할 때까지 기다립니다.

        > **참고**: 이러한 리소스를 만드는 데 1~5분 정도 걸릴 수 있습니다.

1.  **파일 목록** 영역의 **폴더** 텍스트 상자에 **/metadata**를 입력합니다.
    
#### 작업 3: 프로젝트 목록 항목 속성에 대한 작업 만들기

1.  **디자이너** 영역에서 **+ 새 단계**를 선택합니다.

1.  **디자이너** 영역에서 다음 작업을 수행하여 **선택(데이터 작업)** 작업을 추가합니다.
    
    1.  **커넥터 및 트리거 검색** 필드에서 **선택**을 입력합니다.
    
    1.  범주 목록에서 **데이터 작업**을 선택합니다.
    
    1.  **작업** 결과 목록에서 **선택**을 선택합니다.

1.  **선택** 영역에서 다음 작업을 수행하여 **선택(데이터 작업)** 작업을 구성합니다.
    
    1.  **From** 필드에 있는 **동적 콘텐츠** 목록의 **파일 목록** 범주 내에서 **값**을 선택합니다. 
    
    1.  **맵** 필드에서 **텍스트 모드로 전환**을 선택합니다.

    1.  **파일 나열** 범주의 **동적 콘텐츠** 목록에 있는 **맵** 필드에서 **이름**을 선택합니다.
    
#### 작업 4: HTTP 응답 작업 빌드

1.  **디자이너** 영역에서 **+ 새 단계**를 선택하고 다음 작업을 수행하여 **응답(요청)** 작업을 추가합니다.
 
    1.  **검색 커넥터 및 트리거** 필드에서 **응답**을 입력합니다.
       
    1.  **작업** 결과 목록에서 **응답**을 선택합니다.

1.  **응답** 영역에서 다음 작업을 수행하여 **응답(요청)** 작업을 구성합니다.

    1.  **상태 코드** 텍스트 상자에 **200**을 입력합니다.

    1.  **본문** 필드에 있는 **출력** 범주 내의 **동적 콘텐츠** 목록에서 **선택**을 선택합니다.

1.  **디자이너** 영역에서 **저장**을 선택합니다.

#### 검토

이 연습에서는 HTTP GET 요청에 의해 트리거될 때 시작하는 기본 워크플로를 구축했습니다. 그런 다음 스토리지 서비스를 쿼리하고 결과를 열거한 다음 해당 결과를 HTTP 응답으로 반환합니다.

### 연습 3: Azure API Management를 Logic Apps의 프록시로 사용

#### 작업 1: 새 제품 만들기

1.  Azure Portal 탐색 창에서 **리소스 그룹**을 선택합니다.

1.  **리소스 그룹** 블레이드에서 이전에 랩에서 만든 **AutomatedWorkflow** 리소스 그룹을 선택합니다.

1.  **AutomatedWorkflow** 블레이드에서 이 랩의 앞에서 만든 **prodapim*[yourname]*** API Management 리소스를 선택합니다.

1.  **API Management 서비스** 블레이드의 **API Management** 섹션에서 **제품**을 선택합니다.

1.  **제품** 섹션에서 **+ 추가**를 선택합니다.

1.  **제품 추가** 대화 상자에서 다음 작업을 수행합니다.

    1.  **표시 이름** 텍스트 상자에 **Free**를 입력합니다.

    1.  **Id** 텍스트 상자에 **free**를 입력합니다.

    1.  **설명** 텍스트 상자에 **익명 사용을 위한 프리 티어**를 입력합니다.

    1.  **상태** 섹션에서 **게시됨**을 선택합니다.

    1.  **구독 필요** 확인란이 지워졌는지 확인합니다.

    1.  **만들기**를 선택합니다.

#### 작업 2: Logic Apps와 통합된 API 만들기

1.  **API 관리** 섹션의 **API 관리 서비스** 블레이드에서 **API**를 선택합니다.

1.  **새 API 추가** 섹션에서 **논리 앱**을 선택합니다.

1.  **논리 앱 만들기** 대화 상자에서 다음 작업을 수행합니다.

    1.  **전체**를 선택합니다.

    1.  **논리 앱** 섹션에서 **탐색**을 선택합니다. 
    
    1.  **가져올 논리 앱 선택** 대화 상자에서 이전에 랩에서 만든 **prodflow*[yourname]*** 논리 앱을 선택한 다음 **선택**을 선택합니다.
    
    1.  **이름 표시** 텍스트 상자에 **메타데이터 조회**를 입력합니다.
    
    1.  **이름** 텍스트 박스에 **메타데이터 조회**를 입력합니다.

    1.  **설명** 텍스트 상자에 **메타데이터 JSON 파일 조회**를 입력합니다.

    1.  **API URL 접미사** 텍스트 상자를 비워 둡니다.

    1.  **제품** 목록에서 **무료**를 선택합니다.

    1.  **만들기**를 선택합니다. 

    > **참고**: 새 API가 생성될 때까지 기다립니다.

#### 작업 3: API 작업 테스트

1.  **디자인** 탭에서 **테스트** 탭을 선택합니다.

1.  **테스트** 탭에서 다음 작업을 수행합니다.

    1.  단일 **GET** 작업을 선택합니다.

    1.  **URL 요청** 필드의 값을 복사합니다. (이 값은 랩에서 나중에 사용합니다.)

    1.  **보내기**를 선택합니다.

    1.  **HTTP 응답** 섹션에서 테스트 요청의 JSON 결과를 관찰합니다.

#### 작업 4: httprepl을 사용하여 종단 간 솔루션 유효성을 검사합니다.

1.  작업 표시줄에서 **Windows 터미널** 아이콘을 선택합니다.

1.  열린 명령 프롬프트에서 다음 명령을 입력한 다음, 엔터를 선택하여 기본 URI를 이전에 랩에서 복사한 API 작업에 대한 **요청 URL**의 값으로 설정하는 **httprepl** 도구를 시작합니다.

    ```
    httprepl <api-operation-request-url>
    ```

    > **참고**: 예를 들어 **URL**이 **https://prodapimstudent.azure-api.net/manual/paths/invoke**인 경우, 명령은 **httprepl https://prodapimstudent.azure-api.net/manual/paths/invoke**가 됩니다.

1.  도구 프롬프트 내에서 다음 명령을 입력한 다음, Enter를 선택하여 API 엔드포인트에 대해 **get** 명령을 실행합니다.

    ```
    get
    ```

1.  이제 다음을 포함해야 하는 함수 앱의 JSON 응답 내용을 관찰합니다.

    ```
    [ 
        "item_00.json",
        "item_01.json",
        "item_02.json",
        "item_03.json",
        "item_04.json"
    ]
    ```

1.  다음 명령을 입력한 다음, 엔터를 선택하여 **httprepl** 애플리케이션을 종료합니다.

    ```
    exit
    ```

1.  현재 실행 중인 Microsoft Terminal 애플리케이션을 닫습니다.

1.	Azure Portal을 사용하여 브라우저 창으로 돌아갑니다.

#### 검토

이 연습에서는 Azure API Management를 프록시로 사용하여 논리 앱 워크플로를 트리거했습니다.

### 연습 4: 구독 정리 

#### 작업 1: Azure Cloud Shell 열기 및 리소스 그룹 나열

1.  Azure Portal에서 **Cloud Shell** 아이콘을 선택하여 새 셸 인스턴스를 엽니다.

1.  Azure Portal에서 **Cloud Shell** 명령 프롬프트에 다음 명령을 입력하고 Enter 키를 눌러 구독의 모든 리소스 그룹을 나열합니다.

    ```
    az group list
    ```

1.  다음 명령을 입력하고 Enter 키를 눌러 리소스 그룹을 삭제하는 데 사용할 수 있는 명령 목록을 봅니다.

    ```
    az group delete --help
    ```

#### 작업 2: 리소스 그룹 삭제

1.  다음 명령을 입력하고 엔터를 선택하여 **AutomatedWorkflow** 리소스 그룹을 삭제합니다.

    ```
    az group delete --name AutomatedWorkflow --no-wait --yes
    ```

1.  Cloud Shell 창을 닫습니다.

#### 작업 3: 활성 애플리케이션 닫기

-   현재 실행 중인 Microsoft Edge 애플리케이션을 닫습니다.

#### 검토

이 연습에서는 이 랩에 사용된 리소스 그룹을 제거하여 구독을 정리했습니다.